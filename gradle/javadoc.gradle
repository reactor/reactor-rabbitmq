javadoc {
    dependsOn jar
    group = "Reactor RabbitMQ Javadoc"

    description = "Generates aggregated Javadoc API documentation."
    title = "Reactor RabbitMQ ${version}"

    if (JavaVersion.current().isJava8Compatible()) {
        options.addStringOption('Xdoclint:none', '-quiet')
    }

    options.memberLevel = org.gradle.external.javadoc.JavadocMemberLevel.PROTECTED
    options.author = true
    options.header = "Reactor RabbitMQ"
    options.overview = "src/api/overview.html"
    options.stylesheetFile = file("src/api/stylesheet.css")
    options.links(rootProject.ext.javadocLinks)

    maxMemory = "1024m"
    destinationDir = new File(buildDir, "docs/javadoc")
    source rootProject.sourceSets.main.allJava
    doFirst {
        classpath = files(rootProject.sourceSets.main.compileClasspath)
    }
}
